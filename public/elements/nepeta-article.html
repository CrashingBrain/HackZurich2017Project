<link rel="import" href="/polymer/polymer.html">
<link rel="import" href="/css/shared-style.html">

<dom-module id="nepeta-article">
  <template>
    <style is="custom-style" include="shared-style">
      :host {
        display: block;
        margin: 2% 2% 0 2%;
        padding: 10px;
        border-radius: 2px;
        background-color: red;
        color: white;
      }
    </style>

    <p id="container"></p>

  </template>

  <script>
    Polymer({
      is : 'nepeta-article',

      properties: {
        newsitem: {
          type: String,
					value: "",
        },
      },

      attached: function() {
        /* create a well formatted article */
        this.$.container.appendChild(this._getTextFromXHTML(this.newsitem.body_xhtml));
      },

      _getTextFromXHTML: function(htmlstring) {
        var parts = htmlstring.split(/<p>|<\/p>|<p\/>/);
        var wrapper = document.createElement('div');

        for (var str of parts) {
          if (!str.replace(/\s/g, '').length) continue;
          else {
            var par = document.createElement('p');
            par.innerHTML = str;
            wrapper.appendChild(par);
          }
        }
        return wrapper;
      },
    });
  </script>
</dom-module>
